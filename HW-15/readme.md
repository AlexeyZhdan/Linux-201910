# Архитектура сетей
## Теоретическая часть.
**Исходные данные:**
Имеется распределенная сеть состоящая из 3х площадок - центральной и двух периферийных офисов. Для каждой из площадок выделена своя сеть класса С из диапазона частных адресов для создания ЛВС. На каждой из площадок ЛВС разделена на несколько сегментов. Ниже приведены диапазоны подсетей для всех площадок:
***Центральная площадка***
 - 192.168.0.0/28 - directors
 - 192.168.0.32/28 - office hardware
 - 192.168.0.64/26 - wi-fi
 ***Оффис 1***
 - 192.168.2.0/26 - dev
 - 192.168.2.64/26 - test servers
 - 192.168.2.128/26 - managers
 - 192.168.2.192/26 - office hardware
 ***Оффис 2***
 - 192.168.1.0/25 - dev
 - 192.168.1.128/26 - test servers
 - 192.168.1.192/26 - office hardware
### Схема предполагаемой сети
Ниже представлена схема предполагаемой сети постостроеная на основании исходных данных

![alt text](./media/Scrinshots/network-s.jpg)

### Определение свободных подсетей
Согласно исходным данным свободные адреса имеются только на центральной площадке. Диапазоны свободных подсетей приведены ниже:
- 192.168.0.16/28
- 192.168.0.48/28
- 192.168.0.128/25
### Определение количества узлов для каждой подсети включая свободные
Количество узлов в подсети определяется по формуле **N=S-i-b** где:
- **N** - колисетво узлов
- **S** - общее количество IP адресов в подсети
- **i** - адрес используемый для ID подсети
- **b** - адрес для широковещательной рассылки в пределах подсети
Таким образом основываясь на исходных данных получаем:
***Центральная площадка***
 - 192.168.0.0/28 - directors (14 адресов)
 - 192.168.0.16/28 - free (14 адресов)
 - 192.168.0.32/28 - office hardware (14 адресов)
 -192.168.0.48/28 - free (14 адресов)
 - 192.168.0.64/26 - wi-fi (62 адреса)
 - 192.168.0.128/25 -free (126 адресов)
 ***Оффис 1***
 - 192.168.2.0/26 - dev (62 адреса)
 - 192.168.2.64/26 - test servers (62 адреса)
 - 192.168.2.128/26 - managers (62 арреса)
 - 192.168.2.192/26 - office hardware (62 адреса)
 ***Оффис 2***
 - 192.168.1.0/25 - dev (126 адресов)
 - 192.168.1.128/26 - test servers (62 адреса)
 - 192.168.1.192/26 - office hardware (62 адреса)
### Определение широковещательного адреса (broadcast) для каждой подсети включая свободные
Широковешательный адрес это последний адрес из диапазона адресов подсети. Согласно исходным данным получаем:
***Центральная площадка***
 - 192.168.0.0/28 - directors (192.168.0.15)
 - 192.168.0.16/28 - free (192.168.0.31)
 - 192.168.0.32/28 - office hardware (192.168.0.47)
 -192.168.0.48/28 - free (192.168.0.63)
 - 192.168.0.64/26 - wi-fi (192.168.0.127)
 - 192.168.0.128/25 -free (192.168.0.255)
 ***Оффис 1***
 - 192.168.2.0/26 - dev (192.168.2.63)
 - 192.168.2.64/26 - test servers (192.168.2.127)
 - 192.168.2.128/26 - managers (192.168.2.191)
 - 192.168.2.192/26 - office hardware (192.168.2.255)
 ***Оффис 2***
 - 192.168.1.0/25 - dev (192.168.1.127)
 - 192.168.1.128/26 - test servers (192.168.1.191)
 - 192.168.1.192/26 - office hardware (192.168.1.255)
### Ошибки при разбиении
К ошибкам рарзбиения можно отнести разбиение сети в центральном офисе. При таком разбиении мы получаем два диапазона свободных IP адресов на 14 узлов каждый расположенные между выделенными рабочими диапазонами. В случае если изначально при планировании данные диапазоны не были зарезервировани под что-то конкретное с количеством узлов не больше 14. Это может привести к тому что мы не сможем  задействовать данные подсети и в результате потеряем 30 адресов, которые нам могли бы быть доступны. Более рациональным решением было бы выделение подсетей для нужд центрального офиса из смежных диапазонов IP подсетей например так:
- 192.168.0.0/26 - wi-fi
- 192.168.0.64/28 - directors
- 192.168.0.80/28 - office hardware
при этом у нас остается свободным диапазон адресов 192.168.0.96 - 192.168.0.254 что позволит сохранить большее количество IP адресов для подключения узлов
## Практическая часть
Запустить **Vagrantfile** проверить что на серверах **centralRouter, office1Router, office2Router, inetRouter** включился форвардинг пакетов для чего в привелигерованном режиме ввести команду:

```bash
cat /proc/sys/net/ipv4/ip_forward
```

при включеном форвардинге в выводе команда должна дать **1**
Проверить что на сервере **centralRouter** в таблице маршрутизации присутствуют статические маршруты к подсетям **192.168.2.0/24, 192.168.1.0/24** через интерфейс **eth5**
Проверить что на сервере **inetRouter** в таблице маршрутизации присутствуют статические маршруты к подсети **192.168.0.0/21** через интерфейс **eth1**
Проверить что с сервера **office1Server** проходит ping до серверов **office2Server и centralServer**
